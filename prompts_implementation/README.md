# Промпты для имплементации модулей

Эта директория содержит детальные промпты для реализации каждого модуля Support Assistant.

## Рекомендуемый порядок реализации

| # | Файл | Модуль | Зависимости |
|---|------|--------|-------------|
| 1 | `01_llm_client.md` | LLM Client | Нет |
| 2 | `04_rag_embeddings.md` | RAG Embeddings | Нет |
| 3 | `03_rag_indexer.md` | RAG Indexer | embeddings |
| 4 | `05_rag_retriever.md` | RAG Retriever | embeddings |
| 5 | `02_mcp_handler.md` | MCP Handler | Нет |
| 6 | `06_system_prompt.md` | System Prompt | Нет |
| 7 | `07_main.md` | Main Module | Все предыдущие |
| 8 | `08_testing_and_debug.md` | Тестирование | После реализации всех модулей |

## Граф зависимостей

```
                    ┌─────────────┐
                    │   main.py   │
                    └──────┬──────┘
                           │
        ┌──────────────────┼──────────────────┐
        │                  │                  │
        ▼                  ▼                  ▼
┌───────────────┐  ┌───────────────┐  ┌───────────────┐
│  llm_client   │  │  mcp_handler  │  │    prompts    │
└───────────────┘  └───────┬───────┘  └───────────────┘
                           │
                           ▼
                   ┌───────────────┐
                   │      RAG      │
                   └───────┬───────┘
                           │
        ┌──────────────────┼──────────────────┐
        │                  │                  │
        ▼                  ▼                  ▼
┌───────────────┐  ┌───────────────┐  ┌───────────────┐
│    indexer    │  │  embeddings   │  │   retriever   │
└───────┬───────┘  └───────────────┘  └───────┬───────┘
        │                  ▲                  │
        └──────────────────┴──────────────────┘
```

## Как использовать промпты

1. Откройте промпт для нужного модуля
2. Скопируйте содержимое в чат с AI ассистентом
3. Попросите реализовать методы по описанию
4. Проверьте результат по секции "Тестирование"

## Структура каждого промпта

- **Задача** - краткое описание цели модуля
- **Файл** - путь к файлу для реализации
- **Контекст** - как модуль вписывается в общую архитектуру
- **Требования к имплементации** - детальное описание каждого метода
- **Зависимости** - необходимые библиотеки
- **Тестирование** - как проверить реализацию

## Порядок тестирования

1. **embeddings.py** - требует запущенный Ollama
   ```bash
   ollama serve  # в одном терминале
   ollama pull nomic-embed-text  # в другом терминале
   ```

2. **indexer.py** - можно тестировать после embeddings

3. **retriever.py** - требует проиндексированные документы

4. **llm_client.py** - требует API ключ Perplexity

5. **mcp_handler.py** - можно тестировать парсинг локально

6. **main.py** - требует все компоненты

7. **Комплексное тестирование** - см. `08_testing_and_debug.md`
   - Модульные тесты каждого компонента
   - Интеграционные тесты RAG pipeline
   - Сценарное тестирование (user journeys)
   - Негативное тестирование и отказоустойчивость
   - Тестирование производительности
   - Чек-лист финальной проверки
